<!DOCTYPE html>
<html>
<head>
    <title>WebSocket Example</title>
    <script src="/webjars/jquery/jquery.min.js"></script>
    <script src="/webjars/stomp-websocket/stomp.min.js"></script>
</head>
<body>
    <div id="message"></div>
    <script>
  //웹소켓 생성(로그인, 로그아웃 페이지 제외)
	var socket = function(){
		var serverIp = window.location.hostname;

		ws = new WebSocket("ws://" + serverIp + ":8080/websocket");
		
		/**
	    * 웹소켓 사용자 연결 성립하는 경우 호출
	    */
	    ws.onopen = function(message) {
			console.log("connect success");
	    };
	    
		/**
	     * 웹소켓 메시지(From Server) 수신하는 경우 호출
	     */
	     ws.onmessage = function(message) {
		     var str = '';
		     
		     str = '<div class="anotherMsg">';
		     str += '<span class="msg">'+ message.data + '</span>';
		     str += '</div>';
		     
		     $("#chatLog").append(str);
	    };

	    /**
	     * 웹소켓 사용자 연결 해제하는 경우 호출
	     */
	     ws.onclose = function(message) {
	   	    console.log("Server is disconnected.");
	   	 };

	    /**
	     * 웹소켓 에러 발생하는 경우 호출
	     */
	     ws.onerror = function(message) {
	    	commonAlert("Error!");
	    };
	}();
    </script>
</body>
</html>